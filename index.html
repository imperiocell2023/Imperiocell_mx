<!DOCTYPE html>
<html lang="es">
<head>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@700&display=swap" rel="stylesheet">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Imperiocell MX - Tu celular perfecto a pagos</title>
    <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet"  href="https://unpkg.com/swiper/swiper-bundle.min.css" />
</head>
<body>
<header>
        <div style="flex-grow: 1; text-align: center;">
    <h1>ImperioCell MX</h1>
    <nav>
        <ul>
            <li><a href="#home">Inicio</a></li>
            <li><a href="#phones">Tel√©fonos</a></li>
            <li><a href="#contact">Contacto</a></li>
        </ul>
    </nav>
 </div>
</header>
    <section id="home">
        <h2  > Tenemos el celular perfecto para ti üòÉ </h2>
        <h3  > ¬°Ya puedes estrenar a pagos sin tarjeta el mismo d√≠a! </h3> 
    </section>
  <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>  
<div class="swiper-container"> 
<div class="swiper-wrapper"> 
<div class="swiper-slide">    
    <img src="https://raw.githubusercontent.com/imperiocell2023/Imperiocell_mx/main/images/Portada short.jpg" alt="Imagen a lo largo" style="width: 100%; height: 88%;">
</div> 
<div class="swiper-slide">
    <img src="https://raw.githubusercontent.com/imperiocell2023/Imperiocell_mx/main/images/Portada short.jpg" alt="Imagen a lo largo" style="width: 100%; height: 88%;">
</div>
</div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
        <div class="swiper-pagination"></div>
    </div> 
    <section id="home">
       <div class="search-bar" style="align-items: center;"> <input type="text" id="searchInput" placeholder="Buscar..." /> <button id="searchButton">Buscar</button> </div>
    </section>
  <section id="phones"> 
    </section>
    <div style="text-align: center; margin: 20px 0;">
        <a href="https://maps.app.goo.gl/cDCR66WVcdswPPE7A" target="_blank" style="padding: 15px 25px; background-color: #2c3aab; color: white; text-decoration: none; font-size: 20px; border-radius: 5px; display: inline-block;">
            Encu√©ntranos aqu√≠
        </a>
    </div>   
    <div style="text-align: center; margin: 20px 0;">
        <a href="https://forms.gle/YKPr2wuSFZNuFUg9A" target="_blank" style="padding: 15px 25px; background-color: #28a745; color: white; text-decoration: none; font-size: 20px; border-radius: 5px; display: inline-block; margin-bottom: 20px;">
            Vende con nosotros a cr√©dito
        </a>
    </div>
<script>
function filterPhones() {
    const searchInput = document.getElementById('searchInput').value.toLowerCase();
    const phoneCards = document.querySelectorAll('.phone-card');
    const swiperButtons = document.querySelectorAll('.swiper-button-next, .swiper-button-prev');
    let hasVisible = false;

    phoneCards.forEach(card => {
        const phoneName = card.querySelector('h2').textContent.toLowerCase();
        if (phoneName.includes(searchInput)) {
            card.style.display = 'flex'; // Mostrar tarjeta
            hasVisible = true; // Se encontr√≥ al menos una tarjeta visible
        } else {
            card.style.display = 'none'; // Ocultar tarjeta y eliminar espacio
        }
    });
    // Ocultar o mostrar los botones del swiper
    swiperButtons.forEach(button => {
        button.style.display = hasVisible ? 'block' : 'none'; // Mostrar botones solo si hay tarjetas visibles
    });

    // Si hay tarjetas visibles, desplazarse a la secci√≥n de tel√©fonos
    if (hasVisible) {
        document.getElementById('phones').scrollIntoView({ behavior: 'smooth' });
    }
}    

document.getElementById('searchButton').addEventListener('click', function() {
    filterPhones();
});

document.getElementById('searchInput').addEventListener('keydown', function(event) {
    if (event.key === 'Enter') {
        event.preventDefault(); 
        filterPhones();
    }
});

const SHEET_ID = '16RGHwlzDHBQrBP-xjfXtwu58K5myaAAKbigHxCQt2NA';
const API_KEY = 'AIzaSyA4PH8UdUEs3Xq06ygGNJoGrImVGHGpi5c';
const RANGE = 'Precios!A1:P19'; 
async function obtenerDatosTelefonos() {
    const url = `https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/${RANGE}?key=${API_KEY}`;
    const response = await fetch(url);
    const data = await response.json();
    return data.values;
}

obtenerDatosTelefonos().then(datos => {
    const telefonosFiltrados = datos.filter(telefono => {
        return telefono[15] !== "x";
    });

    console.log(telefonosFiltrados); 
    mostrarTelefonos(telefonosFiltrados); 
});
function mostrarTelefonos(telefonos) {
    const phoneSection = document.getElementById('phones');
    phoneSection.innerHTML = ''; // Limpiar la secci√≥n antes de agregar tarjetas

    // Estructura para grupos de 4 tel√©fonos (puedes ajustar este n√∫mero)
    for (let i = 0; i < telefonos.length; i += 4) {
        const phoneCards = telefonos.slice(i, i + 4).map((telefono, index) => {
            const [marca, modelo, memoria, camara, frontal, precio, enganche, total, pagos, bateria, resolucion, procesador, extras, cargador, precio_web, no] = telefono;

            return `
                <div class="phone-card" style="display: flex; padding: 15px; align-items: flex-start; width: 48%;">
                    <img src="https://raw.githubusercontent.com/imperiocell2023/Imperiocell_mx/main/images/${modelo.replace(/\s+/g, ' ')}.jpg" alt="${modelo}" style="width: 300px; height: auto; margin-right: 20px;">
                    <div class="phone-info" style="flex: 1;">
                        <h2 style="font-size: 1.2em; color: #36a0d1;">${marca} <br> ${modelo}</h2>
                        <p style="font-size: 0.95em; margin: 4px 0;"><strong>Memoria: ${memoria}<br>
                            C√°mara: ${camara} Frontal: ${frontal} <br>
                            Bater√≠a: ${bateria}</strong></p>
                        <p style="font-size: 0.8em; color: #555;">
                            Resoluci√≥n: ${resolucion}<br>
                            Procesador: ${procesador}<br>
                            Cargador: ${cargador} </p>
                        <p style="font-size: 0.95em; margin: 7px 0;color: #28a745;"><strong> ${precio_web}</strong></p>
                        <p style="font-size: 17px; color: #36a0d1;"> A cr√©dito desde: </p>
                        <table style="width: 92%;"> <tr> 
                            <td align="left" style="color: #28a745;font-size: 15px;">Enganche:<br> ${enganche}</td> 
                            <td align="right" style="color: #28a0d1;font-size: 15px;">Pagos:<br> ${pagos}</td> 
                        </tr></table><br>
                        <button id="buy-button" style="padding: 10px 15px; background-color: #36a0d1; color: white; border: none; border-radius: 5px; cursor: pointer; margin-top:auto;"
                            class="buy-button"
                            data-phone="${marca}  ${modelo} <br> Memoria: ${memoria} <br> C√°mara: ${camara} Frontal: ${frontal} <br> Bater√≠a: ${bateria} <br> Extras: ${extras}" 
                            data-price="${precio_web}"
                            data-image="https://raw.githubusercontent.com/imperiocell2023/Imperiocell_mx/main/images/${modelo.replace(/\s+/g, ' ')}.jpg" 
                        >Comprar </button>
                    </div>
                </div>`;
        }).join('');

        // Estructura de cada swiper-slide para grupos de 4 tel√©fonos
        const phoneGroup = `
            <section id="phones">   
                <div class="swiper-container"> 
                    <div class="swiper-wrapper"> 
                        <div class="swiper-slide">     
                            <div class="phone-group" style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                ${phoneCards}
                            </div>
                        </div>
                    </div>
                    <div class="swiper-button-next"></div>
                    <div class="swiper-button-prev"></div>
                    <div class="swiper-pagination"></div>
                </div>
            </section>`;

        phoneSection.innerHTML += phoneGroup; // A√±ade el grupo al HTML
    

    // Inicializar Swiper
    new Swiper('.swiper-container', {
        loop: true,
  grabCursor: true,
    slidesPerView: 1, 
    spaceBetween: 0, 
    navigation: {    
      nextEl: '.swiper-button-next',
      prevEl: '.swiper-button-prev',
    },
    pagination: {
      el: '.swiper-pagination',
      clickable: true,
    },
    autoplay: {
      delay: 8000, 
      disableOnInteraction: false, 
    },
  }); 
    }); 
    
    const buyButtons = document.querySelectorAll('.buy-button');
    buyButtons.forEach(button => {
        button.addEventListener('click', function() {
            const phoneName = this.getAttribute('data-phone');
            const phonePrice = this.getAttribute('data-price');
            const phoneImage = this.getAttribute('data-image'); 
            window.location.href = `comprar.html?phone=${encodeURIComponent(phoneName)}&price=${encodeURIComponent(phonePrice)}&image=${encodeURIComponent(phoneImage)}`;
        });
    });    
}
obtenerDatosTelefonos().then(datos => { 
    const telefonosFiltrados = datos.filter(telefono => {
        return telefono[15] !== "x";
    });
        mostrarTelefonos(telefonosFiltrados.slice(1)); // Omitimos la primera fila que tiene los nombres de columnas
});

</script>
<footer>
    <section id="contact" style="padding:10px0; background: linear-gradient(to top,#36a0d1 38%, #f4f4f4 100%);">
        <div style="text-align: center; margin: 20px 0; color: white;">
            <h2>Contacto</h2>
            <p><a href="https://wa.me/5625014478" target="_blank" style="color: white;">5625014478</a></p>
            <p><a href="mailto:imperiocell.payjoy@gmail.com" target="_blank" style="color: white;">imperiocell.payjoy@gmail.com</a></p>
        </div>
    </section>
</footer>
</body>
</html>
